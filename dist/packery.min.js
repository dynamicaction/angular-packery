/*!
 * angular-packery
 * http://github.com/sungard-labs/angular-packery
 * Version: 1.0.6
 * License: MIT
 */

"use strict";!function(){var a=["packeryTemplates"],b={columnWidth:".packery-sizer",itemSelector:".packery-object",rowHeight:".packery-sizer",percentPosition:!0,draggable:!0,handle:".widget-header",timeout:8e3,instantiatedEventName:"packeryInstantiated",acceptedAttributes:["containerStyle","columnWidth","gutter","isHorizontal","isInitLayout","isOriginLeft","isOriginTop","isResizeBound","itemSelector","rowHeight","percentPosition","transitionDuration","instantiatedEventName"]},c=function(a){var b,c=[],d=function(a,b){for(var c=0;c<b.length;c++)if(b[c].id===a)return!1;return!0};return{Packery:function(e,f,g){return f=f||void 0,g=g||{},d(e,c)&&void 0!==f&&(b=new window.Packery(f[0],g),c.push({id:e,packery:b}),f.data("Packery",b),a.$emit(g.instantiatedEventName,b)),b}}},d=function(a,b,c){var d=this;d.packeryInstantiated=!1,d.packeryDraggable=!1,d.dragHandle=void 0,d.uniqueId=(new Date).getTime(),d.packery={},this.bindDragEvents=function(a){var b,c,e;b=d.dragHandle,"*"===b?(e=new window.Draggabilly(a[0]),c=a):(e=new window.Draggabilly(a[0],{handle:b}),c=a[0].querySelectorAll(b)),d.packery.bindDraggabillyEvents(e),angular.element(c).on("mouseenter",function(){a.addClass("hovered")}).on("mouseleave",function(){a.removeClass("hovered")})},this.createAttrObj=function(a){for(var c={},d=b.acceptedAttributes,e=0;e<d.length;e++){var f=a[d[e]];void 0!==f&&("null"===f?c[d[e]]=null:!1===isNaN(f)?c[d[e]]=+a[d[e]]:c[d[e]]=a[d[e]])}return c},this.packObject=function(b,e){c.Packery(d.uniqueId),-1===d.packery.getItemElements().indexOf(b[0])&&d.packery.appended(b[0]),e&&!0===d.packeryDraggable&&d.bindDragEvents(b),b.css("visibility","visible"),a.$emit("packeryObjectPacked",b[0])},this.setDraggable=function(a){d.packeryDraggable=!0,d.dragHandle=a}},e=function(a,b){return{restrict:"EAC",controller:"PackeryController",transclude:!0,replace:!0,templateUrl:function(a,b){return"template/packery/"+(b.template||"packery")+".html"},scope:{containerStyle:"=?",columnWidth:"@?",gutter:"@?",isHorizontal:"@?",isInitLayout:"@?",isOriginLeft:"@?",isOriginTop:"@?",isResizeBound:"@?",itemSelector:"@?",rowHeight:"@?",percentPosition:"@?",transitionDuration:"@?",instantiatedEventName:"@?",draggable:"@?",handle:"@?"},link:function(c,d,e,f){var g,h,i;c.columnWidth=c.columnWidth||a.columnWidth,c.itemSelector=c.itemSelector||a.itemSelector,c.rowHeight=c.rowHeight||a.rowHeight,c.percentPosition=c.percentPosition||a.percentPosition,c.draggable=angular.isDefined(c.draggable)?c.draggable:a.draggable,c.handle=c.handle||a.handle,c.instantiatedEventName=c.instantiatedEventName||a.instantiatedEventName,"false"===c.draggable&&(c.draggable=!1),"false"===c.isHorizontal&&(c.isHorizontal=!1),"false"===c.isInitLayout&&(c.isInitLayout=!1),"false"===c.isOriginLeft&&(c.isOriginLeft=!1),"false"===c.isOriginTop&&(c.isOriginTop=!1),"false"===c.isResizeBound&&(c.isResizeBound=!1),c.containerStyle&&"object"==typeof c.containerStyle&&(c.containerStyle=c.containerStyle),c.draggable&&f.setDraggable(c.handle),g=f.createAttrObj(c),h=f.uniqueId,(i=b.Packery(h,d,g))instanceof window.Packery&&(f.packeryInstantiated=!0,f.packery=i)}}},f=function(){return{restrict:"EA",templateUrl:"template/packery/packery-object.html",transclude:!0,replace:!0}},g=function(){return{restrict:"EA",templateUrl:"template/packery/stack-packery-object.html",transclude:!0,replace:!0}},h=function(a){return{require:"^packery",restrict:"C",link:function(b,c,d,e){c.css("visibility","hidden"),a(function(){$(c).hasClass("add-widget")?e.packObject(c,!1):e.packObject(c,!0)})}}},i=function(a){a.put("template/packery/packery.html",['<div class="packery-wrapper">','<div class="packery-sizer"></div>','<div class="gutter-sizer"></div>','<div class="packery-container" ng-transclude></div>',"</div>"].join("")),a.put("template/packery/packery-object.html",'<div class="packery-object" ng-transclude></div>'),a.put("template/packery/stack-packery.html",['<div class="stack-packery-wrapper">','<div class="stack-packery-sizer"></div>','<div class="stack-gutter-sizer"></div>','<div class="stack-packery-container" ng-transclude></div>',"</div>"].join("")),a.put("template/packery/stack-packery-object.html",'<div class="stack-packery-object" ng-transclude></div>')};angular.module("angular-packery",a).constant("packeryConfig",b).service("packeryService",["$rootScope",c]).controller("PackeryController",["$rootScope","packeryConfig","packeryService",d]).directive("packery",["packeryConfig","packeryService",e]).directive("packeryObject",[f]).directive("packeryObject",["$timeout",h]).directive("stackPackery",["packeryConfig","packeryService",e]).directive("stackPackeryObject",[g]).directive("stackPackeryObject",["$timeout",h]),angular.module("packeryTemplates",[]).run(["$templateCache",i])}();